<!DOCTYPE html><html><head><title>Waiver Analysis - The Trash Zone</title><meta name="description" content="All the trash thats fit to stash"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><style>header{position:relative;max-width:970px;text-align:center;margin:0 auto 10px;border-bottom:3px solid #000}#tagline{font-family:'Old Standard TT',serif}#title{max-width:400px}#contact a{padding-left:5px}.right-header{position:absolute;right:0;bottom:0;font-size:.75rem;line-height:.875rem;font-weight:700}.left-header{text-align:left;font-size:.75rem;line-height:.875rem;font-weight:700;margin-bottom:5px;}.left-header div{display:inline-block;}.left-header div + div:before{content:" - ";margin:0 5px;text-align:center}#menu{border-top:1px solid #d0d0d0;text-align:center;padding:5px;}#menu a{padding:5px 10px;display:inline-block;text-transform:uppercase;font-size:10px;}#menu a:hover{border-radius:5px;background-color:#ccc}@media (max-width:800px){#title{max-width:300px}#contact{display:none}.left-header{margin-top:10px;text-align:center}}html{background:#f0f0f0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica Nueue,Arial,sans-serif}a{text-decoration:none;color:#000;}a:hover{text-decoration:underline;cursor:pointer}a:visited{color:#000}
header{position:relative;max-width:970px;text-align:center;margin:0 auto 10px;border-bottom:3px solid #000}#tagline{font-family:'Old Standard TT',serif}#title{max-width:400px}#contact a{padding-left:5px}.right-header{position:absolute;right:0;bottom:0;font-size:.75rem;line-height:.875rem;font-weight:700}.left-header{text-align:left;font-size:.75rem;line-height:.875rem;font-weight:700;margin-bottom:5px;}.left-header div{display:inline-block;}.left-header div + div:before{content:" - ";margin:0 5px;text-align:center}#menu{border-top:1px solid #d0d0d0;text-align:center;padding:5px;}#menu a{padding:5px 10px;display:inline-block;text-transform:uppercase;font-size:10px;}#menu a:hover{border-radius:5px;background-color:#ccc}@media (max-width:800px){#title{max-width:300px}#contact{display:none}.left-header{margin-top:10px;text-align:center}}.list{display:inline-block}
header{position:relative;max-width:970px;text-align:center;margin:0 auto 10px;border-bottom:3px solid #000}#tagline{font-family:'Old Standard TT',serif}#title{max-width:400px}#contact a{padding-left:5px}.right-header{position:absolute;right:0;bottom:0;font-size:.75rem;line-height:.875rem;font-weight:700}.left-header{text-align:left;font-size:.75rem;line-height:.875rem;font-weight:700;margin-bottom:5px;}.left-header div{display:inline-block;}.left-header div + div:before{content:" - ";margin:0 5px;text-align:center}#menu{border-top:1px solid #d0d0d0;text-align:center;padding:5px;}#menu a{padding:5px 10px;display:inline-block;text-transform:uppercase;font-size:10px;}#menu a:hover{border-radius:5px;background-color:#ccc}@media (max-width:800px){#title{max-width:300px}#contact{display:none}.left-header{margin-top:10px;text-align:center}}#matchups{border-top:1px solid $section-border;border-bottom:1px solid $section-border;text-align:center;padding:10px 0;}#matchups h1{padding-bottom:20px}#matchups .matchup{margin-bottom:10px;}#matchups .matchup a{display:block}#matchups span{font-size:.5rem;line-height:.6rem}
header{position:relative;max-width:970px;text-align:center;margin:0 auto 10px;border-bottom:3px solid #000}#tagline{font-family:'Old Standard TT',serif}#title{max-width:400px}#contact a{padding-left:5px}.right-header{position:absolute;right:0;bottom:0;font-size:.75rem;line-height:.875rem;font-weight:700}.left-header{text-align:left;font-size:.75rem;line-height:.875rem;font-weight:700;margin-bottom:5px;}.left-header div{display:inline-block;}.left-header div + div:before{content:" - ";margin:0 5px;text-align:center}#menu{border-top:1px solid #d0d0d0;text-align:center;padding:5px;}#menu a{padding:5px 10px;display:inline-block;text-transform:uppercase;font-size:10px;}#menu a:hover{border-radius:5px;background-color:#ccc}@media (max-width:800px){#title{max-width:300px}#contact{display:none}.left-header{margin-top:10px;text-align:center}}.loading{text-align:center;padding:25px}.projections{font-weight:700;border-top:1px solid #d0d0d0;margin-top:25px;padding-top:25px;}.projections > div{width:50%;display:inline-block;vertical-align:top}.projections small{font-family:"DecimaMonoPro",monospace;padding-left:5px;color:#b2b2b2;font-size:.8em}@media (max-width:800px){.projections > div{display:block;width:100%}}
header{position:relative;max-width:970px;text-align:center;margin:0 auto 10px;border-bottom:3px solid #000}#tagline{font-family:'Old Standard TT',serif}#title{max-width:400px}#contact a{padding-left:5px}.right-header{position:absolute;right:0;bottom:0;font-size:.75rem;line-height:.875rem;font-weight:700}.left-header{text-align:left;font-size:.75rem;line-height:.875rem;font-weight:700;margin-bottom:5px;}.left-header div{display:inline-block;}.left-header div + div:before{content:" - ";margin:0 5px;text-align:center}#menu{border-top:1px solid #d0d0d0;text-align:center;padding:5px;}#menu a{padding:5px 10px;display:inline-block;text-transform:uppercase;font-size:10px;}#menu a:hover{border-radius:5px;background-color:#ccc}@media (max-width:800px){#title{max-width:300px}#contact{display:none}.left-header{margin-top:10px;text-align:center}}main{max-width:970px;margin:0 auto}section img{height:auto;width:100%;filter:grayscale(80%)}.ab-section{float:left;width:59%;margin-bottom:10px}.a-section{float:left;width:30%;margin-right:3%}.b-section{width:67%;float:left}.side-section{float:right;width:39%;padding-left:1.5%;border-left:1px solid $section-border}.side-news{font-size:.75rem;line-height:.875rem;font-weight:700}#drops,#adds{display:inline-block;}#drops ul,#adds ul{list-style:none;padding-left:6%}@media (max-width:800px){.ab-section,.a-section,.b-section,.side-section{width:100%}}
header{position:relative;max-width:970px;text-align:center;margin:0 auto 10px;border-bottom:3px solid #000}#tagline{font-family:'Old Standard TT',serif}#title{max-width:400px}#contact a{padding-left:5px}.right-header{position:absolute;right:0;bottom:0;font-size:.75rem;line-height:.875rem;font-weight:700}.left-header{text-align:left;font-size:.75rem;line-height:.875rem;font-weight:700;margin-bottom:5px;}.left-header div{display:inline-block;}.left-header div + div:before{content:" - ";margin:0 5px;text-align:center}#menu{border-top:1px solid #d0d0d0;text-align:center;padding:5px;}#menu a{padding:5px 10px;display:inline-block;text-transform:uppercase;font-size:10px;}#menu a:hover{border-radius:5px;background-color:#ccc}@media (max-width:800px){#title{max-width:300px}#contact{display:none}.left-header{margin-top:10px;text-align:center}}.game{width:47%;padding:1.5%;display:inline-block}table{border-collapse:collapse;border-spacing:0;width:100%;margin-bottom:35px;}table thead{text-transform:uppercase;font-size:.5em;vertical-align:bottom;text-align:center;}table thead td{background:#e0e0e0;font-weight:700}table tr{border-bottom:1px solid #cdcdcd}table td{padding:3px 7px 2px 5px;vertical-align:middle;height:34px}table .score,table .proj{border-left:1px solid #222}table .stat{font-family:"DecimaMonoPro",monospace;text-align:center}table .proj{width:60px}table tbody .score{background:#e0e0e0}table .team{min-width:85px}table .logo{-webkit-background-size:cover;-moz-background-size:cover;background-size:cover;background-position:center;border-radius:50%;width:28px;height:28px}@media (max-width:800px){.game{width:100%;padding:0;padding-bottom:15px}}
header{position:relative;max-width:970px;text-align:center;margin:0 auto 10px;border-bottom:3px solid #000}#tagline{font-family:'Old Standard TT',serif}#title{max-width:400px}#contact a{padding-left:5px}.right-header{position:absolute;right:0;bottom:0;font-size:.75rem;line-height:.875rem;font-weight:700}.left-header{text-align:left;font-size:.75rem;line-height:.875rem;font-weight:700;margin-bottom:5px;}.left-header div{display:inline-block;}.left-header div + div:before{content:" - ";margin:0 5px;text-align:center}#menu{border-top:1px solid #d0d0d0;text-align:center;padding:5px;}#menu a{padding:5px 10px;display:inline-block;text-transform:uppercase;font-size:10px;}#menu a:hover{border-radius:5px;background-color:#ccc}@media (max-width:800px){#title{max-width:300px}#contact{display:none}.left-header{margin-top:10px;text-align:center}}#trape-level{border-top:1px solid $section-border;border-bottom:1px solid $section-border;padding:10px 0;text-align:center;text-transform:uppercase;margin-bottom:10px;}#trape-level h2{font-size:1.3em;margin-bottom:10px}#trape-level .tips{text-transform:initial;margin:15px 0;font-weight:700;font-size:.75rem;line-height:.875rem;}#trape-level .tips a{padding-left:5px}#trape-level .level{padding:10px;border-style:ridge}#trape-level .title{color:#fff;text-shadow:1px 1px 2px #000}#trape-level .sub-title{font-size:.5em}#trape-level .yellow{background-color:#ff0}
header{position:relative;max-width:970px;text-align:center;margin:0 auto 10px;border-bottom:3px solid #000}#tagline{font-family:'Old Standard TT',serif}#title{max-width:400px}#contact a{padding-left:5px}.right-header{position:absolute;right:0;bottom:0;font-size:.75rem;line-height:.875rem;font-weight:700}.left-header{text-align:left;font-size:.75rem;line-height:.875rem;font-weight:700;margin-bottom:5px;}.left-header div{display:inline-block;}.left-header div + div:before{content:" - ";margin:0 5px;text-align:center}#menu{border-top:1px solid #d0d0d0;text-align:center;padding:5px;}#menu a{padding:5px 10px;display:inline-block;text-transform:uppercase;font-size:10px;}#menu a:hover{border-radius:5px;background-color:#ccc}@media (max-width:800px){#title{max-width:300px}#contact{display:none}.left-header{margin-top:10px;text-align:center}}h1,h2,h3,h4,h5{text-transform:uppercase;margin:0}h1{font-family:'Philosopher',sans-serif}h2{font-family:'Russo One',sans-serif}h3{font-family:'Archivo Narrow',sans-serif}h4{font-family:'Raleway',sans-serif}h5{font-family:'IM Fell English',serif}p,.text{font-family:'Old Standard TT',sans-serif}small{font-family:"DecimaMonoPro",monospace;padding-left:5px;color:#b2b2b2;font-size:.8em}</style><link href="https://fonts.googleapis.com/css?family=Archivo+Narrow|IM+Fell+English|Old+Standard+TT|Philosopher|Raleway|Russo+One" rel="stylesheet"><link rel="apple-touch-icon-precomposed" sizes="57x57" href="apple-touch-icon-57x57.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-icon-114x114.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-icon-72x72.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-icon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="60x60" href="apple-touch-icon-60x60.png"><link rel="apple-touch-icon-precomposed" sizes="120x120" href="apple-touch-icon-120x120.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="apple-touch-icon-76x76.png"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="apple-touch-icon-152x152.png"><link rel="icon" type="image/png" href="favicon-196x196.png" sizes="196x196"><link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="favicon-128.png" sizes="128x128"><meta name="application-name" content="&amp;nbsp;"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="mstile-144x144.png"><meta name="msapplication-square70x70logo" content="mstile-70x70.png"><meta name="msapplication-square150x150logo" content="mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="mstile-310x150.png"><meta name="msapplication-square310x310logo" content="mstile-310x310.png"></head><body><header><img id="title" src="/logo.png"><div id="tagline">"All the trash that's fit to stash"</div><div class="left-header"><div id="date"></div><div id="current-week"></div></div><div class="right-header"></div><div id="menu"><a href="/">Home</a><a href="/rankings">Rankings</a><a href="/odds">Scoreboard</a><a href="/draft">Draft</a><a href="/waivers">Waivers</a><a href="/league">League Stats</a></div></header><main><section><table class="waivers"><thead><tr><td colspan="100%">Waiver Analysis</td></tr><tr><td>Team</td><td>Bids</td><td>Spent</td><td>Discarded*</td><td>Wasted**</td><td>Max</td><td>Min</td><td>Total Points</td><td>Pts/$</td><td>Starter Points</td><td>Starter Pts/$</td></tr></thead><tbody></tbody></table><p><small>*Discarded is any player picked up on waivers then dropped</small></p><p><small>**Wasted is any player picked up, not started and dropped</small></p><div id="position--tables"></div><div class="list qb"></div><div class="list rb"></div><div class="list wr"></div><div class="list te"></div><div class="list k"></div><div class="list dst"></div></section></main><script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script><script>
/* global ActiveXObject, XMLHttpRequest */

(function (root, factory) {

  root.Request = factory(root);

})(this, function (root) {

  'use strict';

  function buildParams(prefix, obj, add) {
    var name, i, l, rbracket;
    rbracket = /\[\]$/;
    if (obj instanceof Array) {
      for (i = 0, l = obj.length; i < l; i++) {
	if (rbracket.test(prefix)) {
	  add(prefix, obj[i]);
	} else {
	  buildParams(prefix + ( typeof obj[i] === 'object' ? ('[' + i + ']') : '' ), obj[i], add);
	}
      }
    } else if (typeof obj == 'object') {
      // Serialize object item.
      for (name in obj) {
	buildParams(prefix + '[' + name + ']', obj[ name ], add);
      }
    } else {
      // Serialize scalar item.
      add(prefix, obj);
    }
  }

  var objectToQueryString = function (a) {
    var prefix, s, add, name, r20, output;
    s = [];
    r20 = /%20/g;
    add = function (key, value) {
      // If value is a function, invoke it and return its value
      value = ( typeof value == 'function' ) ? value() : ( value == null ? '' : value );
      s[ s.length ] = encodeURIComponent(key) + '=' + encodeURIComponent(value);
    };
    if (a instanceof Array) {
      for (name in a) {
	add(name, a[name]);
      }
    } else {
      for (prefix in a) {
	buildParams(prefix, a[ prefix ], add);
      }
    }
    output = s.join('&').replace(r20, '+');
    return output;
  };

  var parse = function (req) {
    var result;
    try {
      result = JSON.parse(req.responseText);
      result.status = req.status;
    } catch (e) {
      result = { text: req.responseText, status: req.status, url: req._url };
    }
    return [result, req];
  };

  var getXHR = function() {
    if (root.XMLHttpRequest
	&& (!root.location || 'file:' !== root.location.protocol
	    || !root.ActiveXObject)) {
      return new XMLHttpRequest();
    } else {
      try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}
      try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}
      try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}
      try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}
    }
    return false;
  };

  var xhr = function (type, url, data) {
    var methods = {
      success: function () {},
      error: function () {}
    };
    var request = getXHR();
    request._url = url;

    if (!request) throw new Error('unable to detect XHR');

    request.open(type, url, true);
    request.setRequestHeader('Content-type', 'application/json');
    request.onreadystatechange = function () {
      if (request.readyState === 4) {
	if (request.status === 200) {
	  methods.success.apply(methods, parse(request));
	} else {
	  methods.error.apply(methods, parse(request));
	}
      }
    };

    request.send(JSON.stringify(data));
    return {
      success: function (callback) {
	methods.success = callback;
	return this;
      },
      error: function (callback) {
	methods.error = callback;
	return this;
      }
    };
  };

  return {
    head: function(url) {
      return xhr('HEAD', url);
    },
    get: function(url, data) {
      if (data) url += '?' + objectToQueryString(data);
      return xhr('GET', url);
    },
    put: function(url, data) {
      return xhr('PUT', url, data);
    },
    post: function(url, data) {
      return xhr('POST', url, data);
    },
    del: function(url, data) {
      if (data) url += '?' + objectToQueryString(data);
      return xhr('DELETE', url);
    }
  };

});

/* global window, document, Element */
(function(root, factory) {

  root.Elem = factory(root);

})(this, function() {

  'use strict';

  return {
    create: function(opts) {
      opts = opts || {};
      var el, a, i, d;

      el = document.createElement(opts.tag || 'div');

      if (opts.className) {
	el.className = opts.className;
      }

      if (opts.id) {
	el.id = opts.id;
      }
      
      if (opts.attributes) {
	for (a in opts.attributes) {
	  el.setAttribute(a, opts.attributes[a]);
	}
      }

      if (opts.style) {
	for (a in opts.style) {
	  el.style[a] = opts.style[a]
	}
      }
      
      if (opts.html !== undefined) {
	el.innerHTML = opts.html;
      }
      
      if (opts.text) {
	el.appendChild(document.createTextNode(opts.text));
      }

      // IE 8 doesn"t have HTMLElement
      if (window.HTMLElement === undefined) {
	window.HTMLElement = Element;
      }
      
      if (opts.childs && opts.childs.length) {
	for (i = 0; i < opts.childs.length; i++) {
	  el.appendChild(opts.childs[i] instanceof window.HTMLElement ? opts.childs[i] : this.create(opts.childs[i]));
	}
      }

      if (opts.parent) {
	opts.parent.appendChild(el);
      }

      if (opts.onclick) {
	el.onclick = opts.onclick;
      }

      if (opts.dataset) {
	for (d in opts.dataset) {
	  el.dataset[d] = opts.dataset[d];
	}
      }

      return el;
    },

    getClosest: function(elem, selector) {

      var firstChar = selector.charAt(0);

      for ( ; elem && elem !== document; elem = elem.parentNode ) {

	if (firstChar === '.')
	  if (elem.classList.contains(selector.substr(1)))
	    return elem;

	if (firstChar === '#')
	  if (elem.id === selector.substr(1))
	    return elem;

	if (firstChar === '[')
	  if (elem.hasAttribute(selector.substr(1, selector.length - 2)))
	    return elem;

	if (elem.tagName.toLowerCase() === selector) return elem;

      }

      return false;

    },

    getOffX: function(o) {
      // http://www.xs4all.nl/~ppk/js/findpos.html
      var curleft = 0;
      if (o.offsetParent) {
	while (o.offsetParent) {
	  curleft += o.offsetLeft;
	  o = o.offsetParent;
	}
      } else if (o.x) {
	curleft += o.x;
      }
      return curleft;
    },

    getTheDamnTarget: function(e) {
      return (e.target || (window.event ? window.event.srcElement : null));
    },
    
    isChildOfClass : function (oChild, oClass) {
      if (!oChild || !oClass) return false;

      while (oChild.parentNode && !oChild.classList.contains(oClass)) {
	oChild = oChild.parentNode;
      }
      return oChild.classList.contains(oClass);
    },

    text: function(o) {
      return o.innerText || o.textContent;
    },

    each: function (array, callback, scope) {
      for (var i = 0; i < array.length; i++) {
	callback.call(scope, array[i], i);
      }
    }
  };
});

</script><script>
(function(root, factory) {

  root.App = factory(root)

})(this, function() {

  'use strict'

  return {
    api: function(path) {
      path = '/api' + path
      return {
	get: function(params) {
	  params = params || {}
	  return Request.get(path, params)
	},
	put: function(params) {
	  return Request.put(path, params)
	},
	post: function(params) {
	  return Request.post(path, params)
	},
	del: function(params) {
	  params = params || {}
	  return Request.del(path, params)
	}
      }
    },
    data: function(path) {
      path = '/data' + path
      return {
	get: function(params) {
	  params = params || {}
	  return Request.get(path, params)
	}
      }
    }    
  }
})

document.getElementById('date').innerHTML = moment().format('dddd, MMMM D, YYYY')

let week_one = moment('2018-08-28')
let current_week = moment().diff(week_one, 'weeks')
document.getElementById('current-week').innerHTML = `Week ${current_week}`

const baseStats = [
  'count',
  'spent',
  'wasted',
  'discarded',
  'max',
  'min',
  'points',
  'starterPoints',
  'points_per_dollar',
  'starter_points_per_dollar'
]

let limits = {}
for (const stat of baseStats) {
  limits[stat] = {}
  limits[stat].max = 0
  limits[stat].min = 10000
}

const setMinMax = (stat, value) => {
  if (value > limits[stat].max)
    limits[stat].max = value

  if (value < limits[stat].min)
    limits[stat].min = value
}

const getPercentage = (stat, value) => {
  const min = limits[stat].min
  const max = limits[stat].max
  return (value - min) / (max - min)
}

const getMedian = (array) => {
  array.sort((a, b) => {
    return a - b
  })

  const half = Math.floor(array.length / 2)

  if (array.length % 2) {
    return array[half]
  } else {
    return (array[half-1] + array[half]) / 2.0
  }
}

const createPositionTable = (position) => {
  const parent = document.querySelector('#position--tables')

  const columns = [
    'Team',
    'Bids',
    'Total',
    'Min',
    'Max',
    'Average',
    'Median'
  ]
  let columnHeaders = ''
  for (const header of columns) {
    columnHeaders += `<td>${header}</td>`
  }

  Elem.create({
    parent,
    tag: 'table',
    id: `${position}--table`,
    html: `
      <thead>
        <tr><td colspan="100%">${position} Waiver Analysis</td></tr>
        <tr>${columnHeaders}</tr>
      </thead>
      <tbody>
      </tbody>
    `
  })
}

const positions = ['qb', 'rb', 'wr', 'te', 'k', 'dst']
for (const pos of positions) {
  createPositionTable(pos)
}

App.data('/waivers.json').get().success((data) => {
  console.log(data)
  const overall_parent = document.querySelector('main table.waivers tbody')
  for (const teamId in data) {
    if (teamId === 'status')
      continue

    const teamData = data[teamId]
    teamData.points_per_dollar  = teamData.points / teamData.spent
    teamData.starter_points_per_dollar = teamData.starterPoints / teamData.spent

    for (const stat of baseStats) {
      setMinMax(stat, data[teamId][stat])
    }
  }

  console.log(limits)

  for (const teamId in data) {
    if (teamId === 'status')
      continue

    if (!data[teamId].count)
      continue

    const teamData = data[teamId]

    const tds = [{
      tag: 'td',
      text: teamData.name
    }, {
      tag: 'td',
      text: teamData.count,
	  style: {
	    backgroundColor: `rgba(46,163,221,${getPercentage('count', teamData.count)})`
	  }
    }, {
      tag: 'td',
      text: teamData.spent.toString(),
	  style: {
	    backgroundColor: `rgba(46,163,221,${getPercentage('spent', teamData.spent)})`
	  }
    }, {
      tag: 'td',
      text: teamData.discarded.toString(),
	  style: {
	    backgroundColor: `rgba(46,163,221,${getPercentage('discarded', teamData.discarded)})`
	  }
    }, {
      tag: 'td',
      text: teamData.wasted.toString(),
	  style: {
	    backgroundColor: `rgba(46,163,221,${getPercentage('wasted', teamData.wasted)})`
	  }
    }, {
      tag: 'td',
      text: teamData.max.toString(),
	  style: {
	    backgroundColor: `rgba(46,163,221,${getPercentage('max', teamData.max)})`
	  }
    }, {
      tag: 'td',
      text: teamData.min.toString(),
	  style: {
	    backgroundColor: `rgba(46,163,221,${getPercentage('min', teamData.min)})`
	  }
    }, {
      tag: 'td',
      text: teamData.points.toString(),
	  style: {
	    backgroundColor: `rgba(46,163,221,${getPercentage('points', teamData.points)})`
	  }
    }, {
      tag: 'td',
      text: (teamData.points_per_dollar).toFixed(1).toString(),
	  style: {
	    backgroundColor: `rgba(46,163,221,${getPercentage('points_per_dollar', teamData.points_per_dollar)})`
	  }
    }, {
      tag: 'td',
      text: teamData.starterPoints.toString(),
	  style: {
	    backgroundColor: `rgba(46,163,221,${getPercentage('starterPoints', teamData.starterPoints)})`
	  }
    }, {
      tag: 'td',
      text: (teamData.starter_points_per_dollar).toFixed(1).toString(),
	  style: {
	    backgroundColor: `rgba(46,163,221,${getPercentage('starter_points_per_dollar', teamData.starter_points_per_dollar)})`
	  }
    }]

    console.log(tds)

    for (const pos in teamData.positions) {
      const positionData = teamData.positions[pos]
      if (!positionData.count)
        continue
      const position_tds = [{
        tag: 'td',
        text: teamData.name
      }, {
        tag: 'td',
        text: positionData.count
      }, {
        tag: 'td',
        text: positionData.spent
      }, {
        tag: 'td',
        text: positionData.min
      }, {
        tag: 'td',
        text: positionData.max
      }, {
        tag: 'td',
        text: (positionData.spent / positionData.count).toFixed(1)
      }, {
        tag: 'td',
        text: getMedian(positionData.bids)
      }]
      Elem.create({
        tag: 'tr',
        childs: position_tds,
        parent: document.querySelector(`#${pos}--table tbody`)
      })
    }

    Elem.create({
      parent: overall_parent,
      tag: 'tr',
      childs: tds
    })
  }
}).error((message) => {
  console.error(message.error)
})

const buildList = function(opts) {
  const rows = []
  opts.data.forEach(function(player) {
    rows.push({
      tag: 'li',
      html: `${player.name} (${player.team.abbrev}) <small>${player.points_per_dollar.toFixed(2)}pts/$</small`
    })    
  })

  Elem.create({
    parent: opts.parent,
    childs: [{
      tag: 'h2',
      text: opts.title
    }, {
      tag: 'ol',
      childs: rows
    }]
  })
}

const buildTable = function(opts) {
  let min = 1000
  let max = 0

  opts.data.forEach(function(player) {
    if (max < player.points_per_dollar)
      max = player.points_per_dollar

    if (min > player.points_per_dollar)
      min = player.points_per_dollar
  })

  let data_rows = []
  opts.data.forEach(function(player, index) {
    let percentage = (player.points_per_dollar - min) / (max - min)
    data_rows.push({
      tag: 'tr',
      childs: [{
	    tag: 'td',
	    text: `${index + 1}. ${player.name}`
      }, {
	    tag: 'td',
	    text: player.team.abbrev
      }, {
	    tag: 'td',
	    className: 'stat',
	    text: `${opts.position}${player.rank}`
      }, {
	    tag: 'td',
	    className: 'stat',
	    text: player.points
      }, {
	    tag: 'td',
	    className: 'stat',
	    text: player.price
      }, {
	    tag: 'td',
	    className: 'stat',
	    style: {
	      backgroundColor: `rgba(46,163,221,${percentage})`
	    },
	    text: `${player.points_per_dollar.toFixed(2)}pts/$`
      }]
    })
  })
  Elem.create({
    tag: 'table',
    parent: opts.parent,
    childs: [{
      tag: 'thead',
      childs: [{
	    tag: 'tr',
	    childs: [{
	      tag: 'td',
	      attributes: {
	        colspan: '100%'
	      },
	      text: opts.title
	    }]
      }, {
	    tag: 'tr',
	    childs: [{
	      tag: 'td',
	      text: 'Player'
	    }, {
	      tag: 'td',
	      text: 'Team'
	    }, {
	      tag: 'td',
	      text: 'Overall Rank'
	    }, {
	      tag: 'td',
	      text: 'Points'
	    }, {
	      tag: 'td',
	      text: 'Cost'
	    }, {
	      tag: 'td',
	      text: 'Pts/$'
	    }]
      }],
    }, {
      tag: 'tbody',
      childs: data_rows
    }]
  })
}

</script></body></html>